{"ast":null,"code":"import { HttpErrorResponse } from '@angular/common/http';\nimport { throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nexport class TokenInterceptorInterceptor {\n  constructor(router) {\n    this.router = router;\n  }\n  intercept(request, next) {\n    const token = localStorage.getItem('token');\n    if (token) {\n      request = request.clone({\n        setHeaders: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n    }\n    return next.handle(request).pipe(catchError(err => {\n      if (err instanceof HttpErrorResponse) {\n        console.log(err.url);\n        if (err.status === 401 || err.status === 403) {\n          if (this.router.url === '/') {} else {\n            localStorage.clear();\n            this.router.navigate(['/']);\n          }\n        }\n      }\n      return throwError(err);\n    }));\n  }\n}","map":null,"metadata":{},"sourceType":"module"}